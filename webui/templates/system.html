{% extends 'base.html' %}

{% block title %}Netureon - System Status{% endblock %}

{% block header_title %}<i class="fas fa-cog"></i> System Status{% endblock %}
{% block header_description %}Monitor system health and configuration{% endblock %}

{% block content %}
    <!-- Content Header -->
    <div class="content-header">
        <div>
            <h2><i class="fas fa-server"></i> System Information</h2>
            <p class="text-muted mb-0">Current system status and configuration</p>
        </div>
    </div>

    {% if error %}
    <div class="alert alert-danger" role="alert">
        {{ error }}
    </div>
    {% else %}
    <div class="system-info-grid">
        <!-- Netureon Version -->
        <div class="system-card">
            <div class="system-card-header">
                <div class="system-card-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3>Netureon Security Monitor</h3>
            </div>
            <div class="system-card-content">
                <div class="info-item">
                    <span class="info-label">Version</span>
                    <span class="info-value version-badge">{{ info.version }}</span>
                </div>
            </div>
        </div>

        <!-- Operating System -->
        <div class="system-card">
            <div class="system-card-header">
                <div class="system-card-icon">
                    <i class="fas fa-desktop"></i>
                </div>
                <h3>Operating System</h3>
            </div>
            <div class="system-card-content">
                <div class="info-item">
                    <span class="info-label">System</span>
                    <span class="info-value">{{ info.os.system }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Release</span>
                    <span class="info-value">{{ info.os.release }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Version</span>
                    <span class="info-value">{{ info.os.version }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Machine</span>
                    <span class="info-value">{{ info.os.machine }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Processor</span>
                    <span class="info-value">{{ info.os.processor }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Python Version</span>
                    <span class="info-value">{{ info.os.python_version }}</span>
                </div>
            </div>
        </div>

        <!-- System Resources -->
        <div class="system-card system-card-wide">
            <div class="system-card-header">
                <div class="system-card-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h3>System Resources</h3>
            </div>
            <div class="system-card-content">
                <!-- CPU Usage -->
                <div class="resource-section">
                    <div class="resource-header">
                        <span class="resource-title">
                            <i class="fas fa-microchip"></i>
                            CPU Usage
                        </span>
                        <span class="resource-value">{{ info.resources.cpu_percent }}%</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill cpu-progress" 
                                 style="width: {{ info.resources.cpu_percent }}%"></div>
                        </div>
                    </div>
                    <div class="resource-details">
                        <span>{{ info.resources.cpu_count }} cores available</span>
                    </div>
                </div>

                <!-- Memory Usage -->
                <div class="resource-section">
                    <div class="resource-header">
                        <span class="resource-title">
                            <i class="fas fa-memory"></i>
                            Memory Usage
                        </span>
                        <span class="resource-value">{{ info.resources.memory.percent }}%</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill memory-progress" 
                                 style="width: {{ info.resources.memory.percent }}%"></div>
                        </div>
                    </div>
                    <div class="resource-details">
                        <span>{{ (info.resources.memory.available / 1024 / 1024 / 1024) | round(2) }} GB available of {{ (info.resources.memory.total / 1024 / 1024 / 1024) | round(2) }} GB total</span>
                    </div>
                </div>

                <!-- Disk Usage -->
                <div class="resource-section">
                    <div class="resource-header">
                        <span class="resource-title">
                            <i class="fas fa-hdd"></i>
                            Disk Usage
                        </span>
                        <span class="resource-value">{{ info.resources.disk.percent }}%</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill disk-progress" 
                                 style="width: {{ info.resources.disk.percent }}%"></div>
                        </div>
                    </div>
                    <div class="resource-details">
                        <span>{{ (info.resources.disk.free / 1024 / 1024 / 1024) | round(2) }} GB free of {{ (info.resources.disk.total / 1024 / 1024 / 1024) | round(2) }} GB total</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Network Interfaces -->
        <div class="system-card">
            <div class="system-card-header">
                <div class="system-card-icon">
                    <i class="fas fa-network-wired"></i>
                </div>
                <h3>Network Interfaces</h3>
            </div>
            <div class="system-card-content">
                {% for iface, data in info.network.items() %}
                <div class="network-interface">
                    <div class="interface-name">
                        <i class="fas fa-ethernet"></i>
                        {{ iface }}
                    </div>
                    <div class="interface-details">
                        <div class="info-item">
                            <span class="info-label">IP Address</span>
                            <span class="info-value">{{ data.ip }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Netmask</span>
                            <span class="info-value">{{ data.netmask }}</span>
                        </div>
                        {% if data.mac %}
                        <div class="info-item">
                            <span class="info-label">MAC Address</span>
                            <span class="info-value mac-address">{{ data.mac }}</span>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% if not loop.last %}
                <div class="interface-divider"></div>
                {% endif %}
                {% endfor %}
            </div>
        </div>

        <!-- Database -->
        <div class="system-card">
            <div class="system-card-header">
                <div class="system-card-icon">
                    <i class="fas fa-database"></i>
                </div>
                <h3>Database</h3>
            </div>
            <div class="system-card-content">
                <div class="info-item">
                    <span class="info-label">PostgreSQL Version</span>
                    <span class="info-value db-version">{{ info.database }}</span>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
